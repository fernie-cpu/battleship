(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{12:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(6),c=n.n(r),o=(n(12),n(2)),i=n(7),u=n(3),l=n.n(u),h=function(e){var t={board:[],shipsLeft:!0,owner:e,lastShot:{hit:!1,location:!1}};l.a.isEmpty(t.board)&&function(){for(var e=0;e<100;e++)t.board.push({ship:!1,beenHit:!1})}();return{boardInfo:t,receiveAttack:function(e){t.board[e].beenHit=!0,!1!==t.board[e].ship?(t.lastShot.hit=!0,t.lastShot.location=e):(t.lastShot.hit=!1,t.lastShot.location=!1),function(){var e,n=Object(i.a)(t.board);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(!1!==a.ship&&!1===a.beenHit)return void(t.shipsLeft=!0)}}catch(s){n.e(s)}finally{n.f()}t.shipsLeft=!1}()},placeShip:function(e,n){if(e.isVertical)for(var a=0;a<e.shipLength;a++)t.board[n+10*a].ship=e.id;else for(var s=0;s<e.shipLength;s++)t.board[n+s].ship=e.id}}},f=function(e,t,n){var a=Array(t);return{id:e,isVertical:n,shipLength:t,hit:function(e){a[e]="x"},hitLocations:a,isSunk:function(){for(var e=0;e<a.length;e++)if("x"!==a[e])return!1;return!0}}},b=n(0),d=function(e){var t=e.player,n=e.yourTurn,s=e.gameLoop,r=e.start,c=e.restart,i=e.setRestart,u=e.isGame,d=e.setIsGame,p=Object(a.useState)({}),j=Object(o.a)(p,2),m=j[0],O=j[1],v=Object(a.useCallback)((function(){for(var e=[],n=1;n<6;n++){var a=Math.round(10*Math.random()+1)>5;e.push(f(n,n,a))}for(var s=h(t),r=[],c=function(t){var n=e[t],a=function(){return Math.floor(100*Math.random())},c=a(),o=[];if(n.isVertical)for(var i=0;i<n.shipLength;i++)o.push(c+10*i);else for(var u=0;u<n.shipLength;u++)o.push(c+u);for(;r.some((function(e){return o.includes(e)}))||o.includes(9)&&o.includes(10)||o.includes(19)&&o.includes(20)||o.includes(29)&&o.includes(30)||o.includes(39)&&o.includes(40)||o.includes(49)&&o.includes(50)||o.includes(59)&&o.includes(60)||o.includes(69)&&o.includes(70)||o.includes(79)&&o.includes(80)||o.includes(89)&&o.includes(90)||o.some((function(e){return e>99}));)if(o.length=0,c=a(),n.isVertical)for(var l=0;l<n.shipLength;l++)o.push(c+10*l);else for(var h=0;h<n.shipLength;h++)o.push(c+h);s.placeShip(n,c),r.push.apply(r,o),o.length=0},o=0;o<e.length;o++)c(o);O(s)}),[t]);Object(a.useEffect)((function(){r&&v()}),[r,v]),Object(a.useEffect)((function(){c&&(O({}),v(),i(!1))}),[c,i,v]),Object(a.useEffect)((function(){l.a.isEmpty(m)||"Computer"!==m.boardInfo.owner.playerInfo.name&&n&&setTimeout((function(){m.receiveAttack(m.boardInfo.owner.AI(m.boardInfo.lastShot)),s(m.boardInfo.shipsLeft,m.boardInfo.owner.playerInfo.name)}),500)}),[n,m,s]);return Object(b.jsx)("div",{children:l.a.isEmpty(m)?null:Object(b.jsxs)("div",{className:"".concat(n?"":"hide"),children:[" ",Object(b.jsxs)("h3",{children:[t.playerInfo.name,"'s Board"]}),Object(b.jsx)("div",{className:"gameboard-grid-container",children:m.boardInfo.board.map((function(e,a){return Object(b.jsx)("div",{onClick:function(e){n&&function(e){u||d(!0);var t=e.target.id.split("-")[1];m.boardInfo.board[t].beenHit||(m.receiveAttack(t),s(m.boardInfo.shipsLeft,m.boardInfo.owner.playerInfo.name))}(e)},id:"".concat(t.playerInfo.name,"-").concat(a),className:"".concat(!1!==e.ship&&"Computer"!==t.playerInfo.name?"ship":""," ").concat(e.beenHit&&e.ship?"hit":""," ").concat("Computer"===t.playerInfo.name?"square-hover":""," \n                  grid-square"),children:e.beenHit?"X":""},a)}))})]})})},p=function(e){var t={name:e,pastShots:[]},n=function(e){return Math.floor(Math.random()*e)},a=function(){for(var e=n(100);t.pastShots.includes(e);)e=n(100);return t.pastShots.push(e),e};return{playerInfo:t,AI:function(e){if(e.hit){for(var s=function(e){var t;switch(n(4)){case 0:t=e.location+1;break;case 1:t=e.location-1;break;case 2:t=e.location+10;break;case 3:t=e.location-10;break;default:console.log("nah")}return t},r=s(e),c=0,o=!0;t.pastShots.includes(r)||r>99||r<0;)if(r=s(e),50===++c){o=!1;break}return c=0,o?(t.pastShots.push(r),r):a()}return a()},resetPastShots:function(){t.pastShots.length=0}}},j=function(e){var t=e.setPlayer1,n=e.setStart,s=Object(a.useState)(""),r=Object(o.a)(s,2),c=r[0],i=r[1];return Object(b.jsx)("div",{className:"divForm",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(p(""===c?"Player 1":c)),n(!0)},children:[Object(b.jsx)("input",{type:"text",placeholder:"Enter your name",name:"p1",value:c,onChange:function(e){i(e.target.value)}}),Object(b.jsx)("button",{children:"Play"})]})})},m=function(e){var t=e.restart,n=e.setRestart,s=e.isGame,r=e.setIsGame,c=e.setShowControls,i=e.setWinner,u=Object(a.useState)({}),l=Object(o.a)(u,2),h=l[0],f=l[1],m=Object(a.useState)({}),O=Object(o.a)(m,2),v=O[0],S=O[1],y=Object(a.useState)(null),I=Object(o.a)(y,2),x=I[0],g=I[1],L=Object(a.useState)(!1),k=Object(o.a)(L,2),G=k[0],w=k[1];Object(a.useEffect)((function(){S(p("Computer")),g(!1),G&&c(!0)}),[G,r,c]),Object(a.useEffect)((function(){t&&(h.resetPastShots(),g(!1))}),[t,h]);var C=function(e,t){e?g(!x):(i("Computer"===t?h:v),h.resetPastShots(),g(!1))};return Object(b.jsx)("div",{children:G?Object(b.jsxs)("div",{className:"app-gameboard-container",children:[Object(b.jsx)(d,{player:h,yourTurn:x,gameLoop:C,start:G,restart:t,setRestart:n,isGame:s,setIsGame:r}),Object(b.jsx)(d,{player:v,yourTurn:!x,gameLoop:C,start:G,restart:t,setRestart:n,isGame:s,setIsGame:r})]}):Object(b.jsx)(j,{setStart:w,setPlayer1:f})})},O=function(e){var t=e.setRestart,n=e.isGame,a=e.setIsGame,s=e.setWinner;return Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("button",{onClick:function(){a(!1),t(!0),s(!1)},children:n?"Restart":"Shuffle"})})},v=function(e){var t=e.player;return Object(b.jsx)("div",{className:"winner",children:Object(b.jsxs)("h1",{children:[t.playerInfo.name," Wins!"]})})},S=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(!1),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(a.useState)(!1),h=Object(o.a)(l,2),f=h[0],d=h[1],p=Object(a.useState)(!1),j=Object(o.a)(p,2),S=j[0],y=j[1];return Object(b.jsxs)("div",{className:"App",children:[S?Object(b.jsx)(v,{player:S}):Object(b.jsx)("h1",{className:"title",children:"Battleship"}),f?Object(b.jsx)(O,{isGame:i,setIsGame:u,setRestart:s,setWinner:y}):null,Object(b.jsx)(m,{restart:n,setRestart:s,isGame:i,setIsGame:u,setShowControls:d,setWinner:y})]})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4a67d025.chunk.js.map